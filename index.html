<!DOCTYPE html>
<html lang="en"> 
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Autonomic Drugs Flip-Card Quiz&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>:root {</p>
<p class="p1"><span class="Apple-converted-space">            </span>--bg-color: #f0f4f8;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--card-bg: #ffffff;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--primary-text: #1e293b;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--secondary-text: #475569;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--accent-color: #3b82f6;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--accent-hover: #2563eb;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--border-color: #e2e8f0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--correct-bg: #dcfce7;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--correct-text: #166534;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--incorrect-bg: #fee2e2;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--incorrect-text: #991b1b;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--missed-bg: #ffedd5;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--missed-text: #9a3412;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>--font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Basic Setup */</p>
<p class="p1"><span class="Apple-converted-space">        </span>* {</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: var(--font-family);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--primary-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: flex-start;</p>
<p class="p1"><span class="Apple-converted-space">            </span>min-height: 100vh;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 2rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>-webkit-font-smoothing: antialiased;</p>
<p class="p1"><span class="Apple-converted-space">            </span>-moz-osx-font-smoothing: grayscale;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 700px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Header */</p>
<p class="p1"><span class="Apple-converted-space">        </span>header {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: var(--shadow);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: space-between;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.header-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.header-group .label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--secondary-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.875rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>#scoreboard {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.125rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.25rem 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 999px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Toggle Switches */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.toggle-switch {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 999px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.25rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.toggle-switch button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: transparent;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.375rem 0.875rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 999px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.875rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--secondary-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.toggle-switch button.active {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--primary-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Flip Card */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.flip-card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: transparent;</p>
<p class="p1"><span class="Apple-converted-space">            </span>perspective: 1000px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.flip-card-inner {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.6s;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform-style: preserve-3d;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.flip-card.is-flipped .flip-card-inner {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: rotateY(180deg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-face {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>backface-visibility: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>-webkit-backface-visibility: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: var(--shadow);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-back {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: rotateY(180deg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Card Content */</p>
<p class="p1"><span class="Apple-converted-space">        </span>#drug-name-front, #drug-name-back {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2.25rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 700;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--accent-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.quiz-form {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.form-row {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">            </span>grid-template-columns: 150px 1fr;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.form-row label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: right;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--secondary-text);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.input-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>#receptors-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">            </span>grid-template-columns: repeat(3, 1fr);</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Custom Radio/Checkbox */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.choice-input {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.choice-label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: inline-block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.5rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 2px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.choice-input:checked + .choice-label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--accent-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: var(--accent-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.choice-input:hover:not(:checked) + .choice-label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: var(--accent-hover);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>#indirect-mechanisms-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: #f8fafc;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.receptor-details {</p>
<p class="p1"><span class="Apple-converted-space">             </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">             </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">             </span>gap: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">             </span>margin-left: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">             </span>font-size: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.receptor-details .toggle-switch {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.receptor-details .toggle-switch button {</p>
<p class="p1"><span class="Apple-converted-space">             </span>padding: 0.25rem 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">             </span>font-size: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Buttons */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.button-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.75rem 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-primary {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--accent-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-primary:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--accent-hover);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-secondary {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: transparent;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--secondary-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 2px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-secondary:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: var(--secondary-text);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Card Back Feedback */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-section { display: flex; flex-direction: column; gap: 1.25rem; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-row {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">            </span>grid-template-columns: 150px 1fr;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: start;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-row.correct { background-color: var(--correct-bg); color: var(--correct-text); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-row.incorrect { background-color: var(--incorrect-bg); color: var(--incorrect-text); }</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-row .label { font-weight: 600; text-align: right; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-row .value { font-weight: 500; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.feedback-chips { display: flex; flex-wrap: wrap; gap: 0.5rem; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.chip { padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.875rem; font-weight: 500; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.chip.correct { background-color: var(--correct-text); color: white; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.chip.incorrect { background-color: var(--incorrect-text); color: white; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.chip.missed { background-color: var(--missed-text); color: white; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.explanation {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-left: 4px solid var(--accent-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.explanation p { color: var(--secondary-text); line-height: 1.6; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Modal */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-overlay {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: rgba(0, 0, 0, 0.6);</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 100;</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>visibility: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.3s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-overlay.visible {</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 1;</p>
<p class="p1"><span class="Apple-converted-space">            </span>visibility: visible;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 2.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 400px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: scale(0.95);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.3s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-overlay.visible .modal-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: scale(1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content h2 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--secondary-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content .button-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Utility */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.hidden { display: none !important; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>@media (max-width: 600px) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>body { padding: 1rem 0.5rem; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>.container { gap: 1rem; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>header { flex-direction: column; align-items: stretch; gap: 1rem; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>.header-group { justify-content: space-between;}</p>
<p class="p1"><span class="Apple-converted-space">            </span>.card-face { padding: 1.5rem; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>#drug-name-front, #drug-name-back { font-size: 1.75rem; margin-bottom: 1.5rem; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>#receptors-group {</p>
<p class="p1"><span class="Apple-converted-space">                </span>grid-template-columns: repeat(2, 1fr);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>.form-row, .feedback-row { grid-template-columns: 1fr; gap: 0.5rem; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>.form-row label, .feedback-row .label { text-align: left; margin-bottom: 0.5rem; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Header --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;header&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="header-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span class="label"&gt;Mode:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="mode-toggle" class="toggle-switch"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button data-mode="minimal" class="active"&gt;Minimal&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button data-mode="advanced"&gt;Advanced&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="header-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span class="label"&gt;Session:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="session-toggle" class="toggle-switch"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button data-session="study" class="active"&gt;Study&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button data-session="test"&gt;Test&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="header-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span class="label"&gt;Progress:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="scoreboard"&gt;0 / 0&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Flip Card --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="flip-card" class="flip-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="flip-card-inner"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Card Front (Question) --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="card-face card-front"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 id="drug-name-front"&gt;Drug Name&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;form id="quiz-form" class="quiz-form"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Pathway --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="form-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label for="pathway"&gt;Pathway&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="input-group" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="path-symp" name="pathway" value="sympathetic" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="path-symp" class="choice-label"&gt;Sympathetic&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="path-para" name="pathway" value="parasympathetic" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="path-para" class="choice-label"&gt;Parasympathetic&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="path-gang" name="pathway" value="ganglionic" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="path-gang" class="choice-label"&gt;Ganglionic/NMJ&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Action Path --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="form-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label&gt;Action Path&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="input-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="checkbox" id="action-direct" name="actionPath" value="direct" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="action-direct" class="choice-label"&gt;Direct&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="checkbox" id="action-indirect" name="actionPath" value="indirect" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="action-indirect" class="choice-label"&gt;Indirect&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Indirect Mechanisms --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="indirect-mechanisms-container" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                             </span>&lt;div class="form-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label&gt;Indirect Mechanisms&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="input-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="checkbox" id="mech-release" name="indirectMechanism" value="Release" class="choice-input"&gt;&lt;label for="mech-release" class="choice-label"&gt;Release&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="checkbox" id="mech-reuptake" name="indirectMechanism" value="Reuptake inhibition" class="choice-input"&gt;&lt;label for="mech-reuptake" class="choice-label"&gt;Reuptake Inhibition&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="checkbox" id="mech-mao" name="indirectMechanism" value="MAO inhibition" class="choice-input"&gt;&lt;label for="mech-mao" class="choice-label"&gt;MAO Inhibition&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="checkbox" id="mech-comt" name="indirectMechanism" value="COMT inhibition" class="choice-input"&gt;&lt;label for="mech-comt" class="choice-label"&gt;COMT Inhibition&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="checkbox" id="mech-ache" name="indirectMechanism" value="AChE inhibition" class="choice-input"&gt;&lt;label for="mech-ache" class="choice-label"&gt;AChE Inhibition&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="checkbox" id="mech-other" name="indirectMechanism" value="Other" class="choice-input"&gt;&lt;label for="mech-other" class="choice-label"&gt;Other&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Agonism --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="form-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label&gt;Agonism&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="input-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="agonism-agonist" name="agonism" value="agonist" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="agonism-agonist" class="choice-label"&gt;Agonist&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="agonism-antagonist" name="agonism" value="antagonist" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="agonism-antagonist" class="choice-label"&gt;Antagonist&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Net Tilt --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="form-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label&gt;Net Tilt&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="input-group" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="tilt-fight" name="tilt" value="fight" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="tilt-fight" class="choice-label"&gt;Fight-or-Flight&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="tilt-rest" name="tilt" value="rest" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="tilt-rest" class="choice-label"&gt;Rest-and-Digest&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="radio" id="tilt-variable" name="tilt" value="variable" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;label for="tilt-variable" class="choice-label"&gt;Variable&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Receptors --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="form-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label&gt;Receptors&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="receptors-group" class="input-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;!-- Receptors will be populated by JS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="button-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button type="button" id="reset-btn" class="btn btn-secondary"&gt;Reset&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button type="submit" id="submit-btn" class="btn btn-primary"&gt;Submit&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/form&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Card Back (Answer) --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="card-face card-back"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 id="drug-name-back"&gt;Drug Name&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="feedback-section" class="feedback-section"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Feedback rows will be populated by JS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="explanation" class="explanation hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p id="explanation-text"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="button-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button type="button" id="back-btn" class="btn btn-secondary"&gt;Back to Front&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button type="button" id="next-btn" class="btn btn-primary"&gt;Next&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Mode Chooser Modal --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="mode-chooser-modal" class="modal-overlay visible"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="modal-content"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Choose Your Quiz Mode&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p&gt;Select a mode to begin. You can change this at any time using the settings in the header.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="button-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="choose-minimal" class="btn btn-secondary"&gt;Minimal&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="choose-advanced" class="btn btn-primary"&gt;Advanced&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Test Results Modal --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="test-results-modal" class="modal-overlay"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="modal-content"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Test Round Complete&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p&gt;Here's a summary of the concepts you missed. Review them and start the next round!&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="test-results-content" style="text-align: left; max-height: 300px; overflow-y: auto; margin-bottom: 1.5rem; font-size: 0.9rem;"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="close-results-btn" class="btn btn-primary"&gt;Continue&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- DATA MODEL --- //</p>
<p class="p1"><span class="Apple-converted-space">            </span>const masterDrugList = [</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- SYMPATHOMIMETICS (Direct-Acting Agonists) ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Phenylephrine (Neo-Synephrine)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A pure alpha-1 adrenergic agonist that causes potent vasoconstriction." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Midodrine (Proamatine)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "An orally active alpha-1 agonist prodrug used to treat symptomatic orthostatic hypotension." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Norepinephrine (Levophed)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2", "beta-1"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" }, "beta-1": { mode: "direct" } }, explanation: "Potent alpha-1/beta-1 agonist, causing strong vasoconstriction and increased cardiac contractility with less effect on heart rate." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Epinephrine (Adrenaline)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2", "beta-1", "beta-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" }, "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "Acts on all adrenergic receptors; key for anaphylaxis due to vasoconstriction (alpha-1), cardiac effects (beta-1), and bronchodilation (beta-2)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Dopamine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "direct" }, "beta-1": { mode: "direct" } }, explanation: "Dose-dependent effects: intermediate doses stimulate beta-1 (inotropic), and high doses stimulate alpha-1 (vasoconstriction)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Dobutamine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1"], receptorMap: { "beta-1": { mode: "direct" } }, explanation: "Primarily a beta-1 agonist, increasing cardiac contractility (inotropic) more than heart rate (chronotropic)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Isoproterenol", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A potent non-selective beta-agonist. Causes significant increases in heart rate/contractility (beta-1) and vasodilation/bronchodilation (beta-2)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Albuterol (Ventolin)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "A selective short-acting beta-2 agonist (SABA) for acute bronchodilation." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Levalbuterol (Xopenex)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "The R-enantiomer of albuterol, a selective SABA for bronchodilation." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Terbutaline", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "A selective beta-2 agonist used for bronchodilation and tocolysis (relaxation of the uterus)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Salmeterol (Serevent)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "A long-acting beta-2 agonist (LABA) for maintenance bronchodilation." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Formoterol (Performist)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "A long-acting beta-2 agonist (LABA) with a faster onset of action than salmeterol." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Aformoterol (Brovana)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "The R-enantiomer of formoterol, a long-acting beta-2 agonist (LABA)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Indacaterol (Arcapta)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "An ultra-long-acting beta-2 agonist (ultra-LABA) for once-daily COPD maintenance." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Olodaterol (Striverdi)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "An ultra-long-acting beta-2 agonist (ultra-LABA) for once-daily COPD maintenance." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Vilanterol", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-2"], receptorMap: { "beta-2": { mode: "direct" } }, explanation: "An ultra-long-acting beta-2 agonist (ultra-LABA), available only in combination inhalers." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Mirabegron (Myrbetriq)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-3"], receptorMap: { "beta-3": { mode: "direct" } }, explanation: "A selective beta-3 agonist that relaxes the detrusor muscle to treat overactive bladder." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Vibegron (Gemtesa)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-3"], receptorMap: { "beta-3": { mode: "direct" } }, explanation: "A selective beta-3 agonist used to treat overactive bladder." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Clonidine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-2"], receptorMap: { "alpha-2": { mode: "direct" } }, tiltOverride: "rest", explanation: "A centrally-acting alpha-2 agonist that reduces sympathetic outflow, causing hypotension and bradycardia (net sympatholytic effect)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Dexmedetomidine (Precedex)", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-2"], receptorMap: { "alpha-2": { mode: "direct" } }, tiltOverride: "rest", explanation: "A highly selective central alpha-2 agonist used for sedation and analgesia, reducing sympathetic tone." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Guanfacine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-2"], receptorMap: { "alpha-2": { mode: "direct" } }, tiltOverride: "rest", explanation: "A selective, centrally-acting alpha-2 agonist used for hypertension and ADHD." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Guanabenz", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-2"], receptorMap: { "alpha-2": { mode: "direct" } }, tiltOverride: "rest", explanation: "A centrally-acting alpha-2 agonist that reduces sympathetic outflow, causing hypotension." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Methyldopa", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-2"], receptorMap: { "alpha-2": { mode: "direct" } }, tiltOverride: "rest", explanation: "A prodrug converted to a central alpha-2 agonist; used for hypertension in pregnancy." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Oxymetazoline", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" } }, explanation: "A direct-acting alpha agonist used as a topical nasal decongestant; can cause rebound congestion." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Naphazoline", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" } }, explanation: "A direct alpha agonist found in over-the-counter vasoconstrictor eye drops." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Xylometazoline", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" } }, explanation: "Topical alpha agonist used as a nasal decongestant, similar to oxymetazoline." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tetrahydrozoline", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" } }, explanation: "Alpha agonist found in eye drops to relieve redness by causing vasoconstriction." },</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- SYMPATHOMIMETICS (Indirect/Mixed) ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Ephedrine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct", "indirect"], indirectMechanisms: ["Release"], receptors: ["alpha-1", "beta-1", "beta-2"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release"] }, "beta-1": { mode: "indirect", mechanisms: ["Release"] }, "beta-2": { mode: "direct" } }, explanation: "A mixed-acting agonist that directly stimulates beta receptors and causes the release of norepinephrine." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Pseudoephedrine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct", "indirect"], indirectMechanisms: ["Release"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release"] }, "beta-1": { mode: "direct" } }, explanation: "A mixed-acting agonist used as a nasal decongestant, with fewer CNS effects than ephedrine." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Phenylpropanolamine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct", "indirect"], indirectMechanisms: ["Release"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release"] }, "beta-1": { mode: "direct" } }, explanation: "Mixed-acting sympathomimetic, formerly used as a decongestant and anorectic." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Cocaine", tone: "sympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Reuptake inhibition"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Reuptake inhibition"] }, "beta-1": { mode: "indirect", mechanisms: ["Reuptake inhibition"] } }, explanation: "Blocks reuptake of norepinephrine, dopamine, and serotonin, causing potent sympathomimetic and CNS effects." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Amphetamine", tone: "sympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Release", "Reuptake inhibition"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release", "Reuptake inhibition"] }, "beta-1": { mode: "indirect", mechanisms: ["Release", "Reuptake inhibition"] } }, explanation: "Promotes release and blocks reuptake of norepinephrine and dopamine, causing significant CNS stimulation." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Methamphetamine", tone: "sympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Release", "Reuptake inhibition"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release", "Reuptake inhibition"] }, "beta-1": { mode: "indirect", mechanisms: ["Release", "Reuptake inhibition"] } }, explanation: "Potent CNS stimulant that strongly promotes release and blocks reuptake of dopamine and norepinephrine." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "MDMA (Ecstasy)", tone: "sympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Release", "Reuptake inhibition"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release", "Reuptake inhibition"] }, "beta-1": { mode: "indirect", mechanisms: ["Release", "Reuptake inhibition"] } }, explanation: "Indirect-acting sympathomimetic that primarily increases serotonin release but also affects dopamine and norepinephrine." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Methylphenidate (Ritalin)", tone: "sympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Reuptake inhibition"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Reuptake inhibition"] }, "beta-1": { mode: "indirect", mechanisms: ["Reuptake inhibition"] } }, explanation: "A CNS stimulant that primarily blocks the reuptake of dopamine and norepinephrine." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tyramine", tone: "sympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Release"], receptors: ["alpha-1", "beta-1"], receptorMap: { "alpha-1": { mode: "indirect", mechanisms: ["Release"] }, "beta-1": { mode: "indirect", mechanisms: ["Release"] } }, explanation: "Found in fermented foods; promotes norepinephrine release. Can cause a hypertensive crisis in patients taking MAO inhibitors." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Ergotamine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "Ergot alkaloid with complex effects, including potent alpha-1 mediated vasoconstriction. Used for migraines." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Methylergonovine", tone: "sympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "Ergot alkaloid used to cause uterine smooth muscle contraction (alpha-1 mediated) to prevent postpartum hemorrhage." },</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- SYMPATHOLYTICS (Adrenergic Antagonists) ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Phenoxybenzamine", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" } }, explanation: "An irreversible, non-selective alpha-antagonist used to treat pheochromocytoma." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Phentolamine (Regitine)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "alpha-2"], receptorMap: { "alpha-1": { mode: "direct" }, "alpha-2": { mode: "direct" } }, explanation: "A reversible, competitive, non-selective alpha-antagonist for hypertensive crises." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Prazosin (Minipress)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A selective alpha-1 antagonist for hypertension and BPH; can cause first-dose orthostatic hypotension." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Terazosin (Hytrin)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A selective alpha-1 antagonist, similar to prazosin but with a longer half-life." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Doxazosin (Cardura)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A long-acting selective alpha-1 antagonist for hypertension and BPH." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tamsulosin (Flomax)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A selective alpha-1A antagonist, primarily used for benign prostatic hyperplasia (BPH) with less effect on blood pressure." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Alfuzosin (Uroxatral)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A uroselective alpha-1 antagonist for BPH that is less likely to cause hypotension." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Silodosin (Rapaflo)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1"], receptorMap: { "alpha-1": { mode: "direct" } }, explanation: "A highly selective alpha-1A antagonist for BPH, associated with ejaculatory dysfunction." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Yohimbine", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-2"], receptorMap: { "alpha-2": { mode: "direct" } }, tiltOverride: "fight", explanation: "A selective alpha-2 antagonist that blocks presynaptic feedback inhibition, increasing sympathetic outflow and blood pressure." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Propranolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A non-selective beta-antagonist (prototype) that reduces heart rate, contractility, and blood pressure." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Nadolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A long-acting, non-selective beta-blocker." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Timolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A non-selective beta-blocker used topically to treat glaucoma by reducing aqueous humor production." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Pindolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A non-selective beta-blocker with intrinsic sympathomimetic activity (ISA), causing less bradycardia at rest." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Carteolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A non-selective beta-blocker with intrinsic sympathomimetic activity (ISA)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Penbutolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1", "beta-2"], receptorMap: { "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A non-selective beta-blocker with intrinsic sympathomimetic activity (ISA)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Metoprolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1"], receptorMap: { "beta-1": { mode: "direct" } }, explanation: "A cardioselective (beta-1) antagonist that primarily reduces heart rate and contractility." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Atenolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1"], receptorMap: { "beta-1": { mode: "direct" } }, explanation: "A cardioselective (beta-1) antagonist, similar to metoprolol but more water-soluble with less CNS penetration." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Esmolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1"], receptorMap: { "beta-1": { mode: "direct" } }, explanation: "An ultra-short-acting, intravenous, cardioselective (beta-1) antagonist." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Acebutolol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1"], receptorMap: { "beta-1": { mode: "direct" } }, explanation: "A cardioselective (beta-1) blocker with intrinsic sympathomimetic activity (ISA)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Labetalol", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "beta-1", "beta-2"], receptorMap: { "alpha-1": { mode: "direct" }, "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A mixed antagonist blocking alpha-1, beta-1, and beta-2 receptors, causing vasodilation and reduced heart rate." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Carvedilol (Coreg)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["alpha-1", "beta-1", "beta-2"], receptorMap: { "alpha-1": { mode: "direct" }, "beta-1": { mode: "direct" }, "beta-2": { mode: "direct" } }, explanation: "A mixed alpha/beta antagonist with antioxidant properties, commonly used in heart failure." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Nebivolol (Bystolic)", tone: "sympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["beta-1"], receptorMap: { "beta-1": { mode: "direct" } }, explanation: "A highly selective beta-1 blocker that also causes vasodilation by releasing nitric oxide." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Reserpine", tone: "sympathetic", agonism: "antagonist", actionPaths: ["indirect"], indirectMechanisms: ["Other"], receptors: [], receptorMap: {}, explanation: "Depletes norepinephrine from nerve terminals by irreversibly blocking the vesicular monoamine transporter (VMAT)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Guanethidine", tone: "sympathetic", agonism: "antagonist", actionPaths: ["indirect"], indirectMechanisms: ["Other"], receptors: [], receptorMap: {}, explanation: "Inhibits the release of norepinephrine from sympathetic nerve endings." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Bretylium", tone: "sympathetic", agonism: "antagonist", actionPaths: ["indirect"], indirectMechanisms: ["Other"], receptors: [], receptorMap: {}, explanation: "Blocks the release of norepinephrine from nerve terminals; formerly used as an antiarrhythmic." },</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- PARASYMPATHOMIMETICS (Cholinergic Agonists) ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Acetylcholine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "The endogenous neurotransmitter for muscarinic and nicotinic receptors; very short-acting." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Muscarine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "Natural alkaloid from mushrooms that is a potent, selective muscarinic receptor agonist." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Arecoline", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "An alkaloid from the betel nut that acts as a muscarinic agonist." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Bethanechol (Urecholine)", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M2", "M3"], receptorMap: { "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A muscarinic agonist resistant to cholinesterases; used to stimulate bladder and GI smooth muscle." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Carbachol", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A potent muscarinic and nicotinic agonist, primarily used as a miotic agent in ophthalmology." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Methacholine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "A muscarinic agonist primarily acting on M3 receptors, used in the bronchial challenge test to diagnose asthma." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Pilocarpine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A muscarinic agonist used to treat glaucoma (miosis) and xerostomia (dry mouth)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Neostigmine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A quaternary amine reversible AChE inhibitor; does not cross the BBB. Used for myasthenia gravis and reversal of neuromuscular blockade." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Pyridostigmine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A longer-acting reversible AChE inhibitor used for chronic management of myasthenia gravis." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Physostigmine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A tertiary amine reversible AChE inhibitor that crosses the BBB. Used as an antidote for anticholinergic toxicity." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Edrophonium", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A very short-acting, reversible AChE inhibitor historically used for diagnosing myasthenia gravis (Tensilon test)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Ambenonium", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A reversible AChE inhibitor used for treating myasthenia gravis." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Rivastigmine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A centrally-acting AChE inhibitor that crosses the BBB, used for dementia associated with Alzheimer's and Parkinson's disease." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Donepezil", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A centrally-acting, reversible AChE inhibitor used to improve cognition in Alzheimer's disease." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tacrine", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "The first centrally-acting AChE inhibitor approved for Alzheimer's, now rarely used due to hepatotoxicity." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Echothiophate", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "An irreversible organophosphate AChE inhibitor, causing long-lasting effects. Used topically for glaucoma." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Isoflurophate", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "An irreversible organophosphate AChE inhibitor used in ophthalmic ointments." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Malathion", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "An organophosphate insecticide and irreversible AChE inhibitor; a common source of cholinergic toxicity." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Parathion", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A highly toxic organophosphate insecticide and irreversible AChE inhibitor." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Sarin (GB)", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A highly toxic organophosphate nerve agent and irreversible AChE inhibitor." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Soman (GD)", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A highly toxic organophosphate nerve agent and irreversible AChE inhibitor, known for rapid 'aging'." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tabun (GA)", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "A highly toxic organophosphate nerve agent and irreversible AChE inhibitor." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "VX", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["AChE inhibition"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M2": { mode: "indirect", mechanisms: ["AChE inhibition"] }, "M3": { mode: "indirect", mechanisms: ["AChE inhibition"] } }, explanation: "An extremely potent and persistent organophosphate nerve agent and irreversible AChE inhibitor." },</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- PARASYMPATHOLYTICS (Cholinergic Antagonists) ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Atropine", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A non-selective muscarinic antagonist prototype. Used for bradycardia, reducing secretions, and as an antidote for cholinergic poisoning." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Scopolamine (Hyoscine)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A muscarinic antagonist with more pronounced CNS effects than atropine. Used for motion sickness and sedation." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Glycopyrrolate (Robinul)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A quaternary amine muscarinic antagonist that does not cross the BBB. Used to reduce secretions." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Ipratropium (Atrovent)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "An inhaled short-acting muscarinic antagonist (SAMA) causing bronchodilation, primarily for COPD." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tiotropium (Spiriva)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M3"], receptorMap: { "M1": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "An inhaled long-acting muscarinic antagonist (LAMA) with kinetic selectivity for M3 over M2, for sustained bronchodilation." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Aclidinium (Tudorza)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "An inhaled long-acting muscarinic antagonist (LAMA) used for maintenance therapy in COPD." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Umeclidinium (Incruse)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "An inhaled long-acting muscarinic antagonist (LAMA) used in combination products for COPD." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Benztropine (Cogentin)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1"], receptorMap: { "M1": { mode: "direct" } }, explanation: "A centrally-acting M1 antagonist for Parkinsonism and drug-induced extrapyramidal symptoms." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Trihexyphenidyl (Artane)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1"], receptorMap: { "M1": { mode: "direct" } }, explanation: "A centrally-acting M1 antagonist, similar to benztropine, for Parkinson's disease." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Oxybutynin (Ditropan)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "A muscarinic antagonist, primarily targeting M3 receptors, to treat overactive bladder." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tolterodine (Detrol)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M2", "M3"], receptorMap: { "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A competitive muscarinic antagonist for overactive bladder, with more selectivity for the bladder than salivary glands compared to oxybutynin." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Fesoterodine (Toviaz)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M2", "M3"], receptorMap: { "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A competitive muscarinic antagonist prodrug, similar to tolterodine, for overactive bladder." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Darifenacin (Enablex)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "A highly selective M3 muscarinic antagonist used for treating overactive bladder." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Solifenacin (Vesicare)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "A competitive muscarinic antagonist with selectivity for the M3 receptor, used for overactive bladder." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Trospium (Sanctura)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M2", "M3"], receptorMap: { "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A quaternary amine muscarinic antagonist for overactive bladder; does not cross the BBB." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Tropicamide", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "A short-acting muscarinic antagonist used topically to induce mydriasis and cycloplegia for eye exams." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Cyclopentolate", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M3"], receptorMap: { "M3": { mode: "direct" } }, explanation: "A muscarinic antagonist used topically for mydriasis and cycloplegia with a longer duration than tropicamide." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Propantheline (Pro-Banthine)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A muscarinic antagonist formerly used for peptic ulcer disease and GI hypermotility." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Diphenhydramine (Benadryl)", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A first-generation antihistamine with significant anticholinergic (muscarinic antagonist) properties." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Imipramine", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A tricyclic antidepressant with strong anticholinergic side effects; also blocks reuptake of norepinephrine and serotonin." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Amitriptyline", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A tricyclic antidepressant with strong anticholinergic (muscarinic antagonist) side effects." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Thioridazine", tone: "parasympathetic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "direct" }, "M2": { mode: "direct" }, "M3": { mode: "direct" } }, explanation: "A typical antipsychotic with strong anticholinergic (muscarinic antagonist) properties." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Metoclopramide (Reglan)", tone: "parasympathetic", agonism: "agonist", actionPaths: ["indirect"], indirectMechanisms: ["Other"], receptors: ["M1", "M2", "M3"], receptorMap: { "M1": { mode: "indirect", mechanisms: ["Other"] }, "M2": { mode: "indirect", mechanisms: ["Other"] }, "M3": { mode: "indirect", mechanisms: ["Other"] } }, explanation: "Primarily a D2 antagonist, but also acts as a prokinetic by promoting acetylcholine release in the GI tract." },</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- GANGLIONIC &amp; NMJ AGENTS ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Nicotine", tone: "ganglionic", agonism: "agonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["Nn", "Nm"], receptorMap: { "Nn": { mode: "direct" }, "Nm": { mode: "direct" } }, tiltOverride: "variable", explanation: "A nicotinic receptor agonist that stimulates both sympathetic and parasympathetic ganglia (Nn) and the neuromuscular junction (Nm)." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Hexamethonium", tone: "ganglionic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["Nn"], receptorMap: { "Nn": { mode: "direct" } }, tiltOverride: "variable", explanation: "A non-depolarizing ganglionic blocker that antagonizes nicotinic (Nn) receptors in both autonomic ganglia." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Mecamylamine", tone: "ganglionic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["Nn"], receptorMap: { "Nn": { mode: "direct" } }, tiltOverride: "variable", explanation: "A non-competitive ganglionic blocker that antagonizes nicotinic (Nn) receptors." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Trimethaphan", tone: "ganglionic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["Nn"], receptorMap: { "Nn": { mode: "direct" } }, tiltOverride: "variable", explanation: "A short-acting ganglionic blocker used for controlled hypotension." },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ name: "Pancuronium", tone: "ganglionic", agonism: "antagonist", actionPaths: ["direct"], indirectMechanisms: [], receptors: ["Nm"], receptorMap: { "Nm": { mode: "direct" } }, tiltOverride: "variable", explanation: "A non-depolarizing neuromuscular blocker that antagonizes nicotinic (Nm) receptors at the NMJ." },</p>
<p class="p1"><span class="Apple-converted-space">            </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const allReceptors = ["alpha-1", "alpha-2", "beta-1", "beta-2", "beta-3", "M1", "M2", "M3", "M4", "M5", "Nn", "Nm"];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- STATE --- //</p>
<p class="p1"><span class="Apple-converted-space">            </span>let state = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>currentDrug: null,</p>
<p class="p1"><span class="Apple-converted-space">                </span>mode: 'minimal',</p>
<p class="p1"><span class="Apple-converted-space">                </span>session: 'study',</p>
<p class="p1"><span class="Apple-converted-space">                </span>isFlipped: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>testCycleCount: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>missedInTest: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>questionBank: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>masteredBank: [],</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- DOM ELEMENTS --- //</p>
<p class="p1"><span class="Apple-converted-space">            </span>const DOMElements = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flipCard: document.getElementById('flip-card'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>drugNameFront: document.getElementById('drug-name-front'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>drugNameBack: document.getElementById('drug-name-back'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>quizForm: document.getElementById('quiz-form'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>receptorsGroup: document.getElementById('receptors-group'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>indirectMechContainer: document.getElementById('indirect-mechanisms-container'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>submitBtn: document.getElementById('submit-btn'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>resetBtn: document.getElementById('reset-btn'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>backBtn: document.getElementById('back-btn'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>nextBtn: document.getElementById('next-btn'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>feedbackSection: document.getElementById('feedback-section'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>explanation: document.getElementById('explanation'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>explanationText: document.getElementById('explanation-text'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>scoreboard: document.getElementById('scoreboard'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>modeToggle: document.getElementById('mode-toggle'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>sessionToggle: document.getElementById('session-toggle'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>modeChooserModal: document.getElementById('mode-chooser-modal'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>chooseMinimalBtn: document.getElementById('choose-minimal'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>chooseAdvancedBtn: document.getElementById('choose-advanced'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>testResultsModal: document.getElementById('test-results-modal'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>testResultsContent: document.getElementById('test-results-content'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>closeResultsBtn: document.getElementById('close-results-btn'),</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- HELPER FUNCTIONS --- //</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const shuffleArray = (array) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>for (let i = array.length - 1; i &gt; 0; i--) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const j = Math.floor(Math.random() * (i + 1));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>[array[i], array[j]] = [array[j], array[i]];</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const calculateTilt = (drug) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (drug.tiltOverride) return drug.tiltOverride;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (drug.tone === 'sympathetic') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return drug.agonism === 'agonist' ? 'fight' : 'rest';</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else { // parasympathetic</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return drug.agonism === 'agonist' ? 'rest' : 'fight';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const arrayEquals = (a, b) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>return Array.isArray(a) &amp;&amp; Array.isArray(b) &amp;&amp; a.length === b.length &amp;&amp; a.sort().every((val, index) =&gt; val === b.sort()[index]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const updateScoreboard = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>const mastered = state.masteredBank.length;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>const remaining = state.questionBank.length;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>DOMElements.scoreboard.textContent = `Mastered: ${mastered} | Remaining: ${remaining}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const flipCard = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.isFlipped = !state.isFlipped;</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.flipCard.classList.toggle('is-flipped', state.isFlipped);</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- CORE LOGIC --- //</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const initializeQuiz = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.questionBank = [...masterDrugList];</p>
<p class="p1"><span class="Apple-converted-space">                </span>shuffleArray(state.questionBank);</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.masteredBank = [];</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.testCycleCount = 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.missedInTest = [];</p>
<p class="p1"><span class="Apple-converted-space">                </span>loadNewCard();</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const populateReceptors = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.receptorsGroup.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>allReceptors.forEach(receptor =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const receptorId = `receptor-${receptor.replace('-','')}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let html = `</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div style="display: flex; flex-direction: column; align-items: center;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                           </span>&lt;input type="checkbox" id="${receptorId}" name="receptor" value="${receptor}" class="choice-input"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                           </span>&lt;label for="${receptorId}" class="choice-label"&gt;${receptor}&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                           </span>&lt;div id="details-${receptorId}" class="receptor-details hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                               </span>&lt;div class="toggle-switch"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;button data-value="direct" data-receptor="${receptor}" class="active"&gt;Direct&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;button data-value="indirect" data-receptor="${receptor}"&gt;Indirect&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                               </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                           </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>DOMElements.receptorsGroup.insertAdjacentHTML('beforeend', html);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Add event listeners for advanced mode toggles</p>
<p class="p1"><span class="Apple-converted-space">                 </span>DOMElements.receptorsGroup.querySelectorAll('input[name="receptor"]').forEach(checkbox =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>checkbox.addEventListener('change', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (state.mode === 'advanced') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const detailsDiv = document.getElementById(`details-${checkbox.id}`);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>detailsDiv.classList.toggle('hidden', !checkbox.checked);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.receptorsGroup.querySelectorAll('.receptor-details .toggle-switch button').forEach(btn =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>btn.addEventListener('click', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                         </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">                         </span>const parent = e.target.parentElement;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>parent.querySelector('.active').classList.remove('active');</p>
<p class="p1"><span class="Apple-converted-space">                         </span>e.target.classList.add('active');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const resetCard = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.quizForm.reset();</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.isFlipped) flipCard();</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.explanation.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.indirectMechContainer.classList.add('hidden');</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>document.querySelectorAll('.choice-input').forEach(input =&gt; input.checked = false);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.mode === 'advanced') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>document.querySelectorAll('.receptor-details').forEach(el =&gt; el.classList.add('hidden'));</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const loadNewCard = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.questionBank.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (state.masteredBank.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// All questions answered correctly, cycle them back in</p>
<p class="p1"><span class="Apple-converted-space">                        </span>state.questionBank = [...state.masteredBank];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>state.masteredBank = [];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>shuffleArray(state.questionBank);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// This case should ideally not be hit if masterDrugList is not empty</p>
<p class="p1"><span class="Apple-converted-space">                        </span>DOMElements.drugNameFront.textContent = "Quiz Complete!";</p>
<p class="p1"><span class="Apple-converted-space">                        </span>DOMElements.quizForm.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.quizForm.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.currentDrug = state.questionBank[0]; // Always take the next question from the front</p>
<p class="p1"><span class="Apple-converted-space">                </span>resetCard();</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.drugNameFront.textContent = state.currentDrug.name;</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.drugNameBack.textContent = state.currentDrug.name;</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.explanationText.textContent = state.currentDrug.explanation;</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateScoreboard();</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const gradeAnswer = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const drug = state.currentDrug;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const formData = new FormData(DOMElements.quizForm);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const results = { isFullyCorrect: true, feedback: {} };</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const userPathway = formData.get('pathway');</p>
<p class="p1"><span class="Apple-converted-space">                </span>results.feedback.pathway = { correct: userPathway === drug.tone, user: userPathway || 'None', answer: drug.tone };</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!results.feedback.pathway.correct) results.isFullyCorrect = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const userAgonism = formData.get('agonism');</p>
<p class="p1"><span class="Apple-converted-space">                </span>results.feedback.agonism = { correct: userAgonism === drug.agonism, user: userAgonism || 'None', answer: drug.agonism };</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!results.feedback.agonism.correct) results.isFullyCorrect = false;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const userTilt = formData.get('tilt');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const correctTilt = calculateTilt(drug);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const tiltMap = { fight: 'Fight-or-Flight', rest: 'Rest-and-Digest', variable: 'Variable' };</p>
<p class="p1"><span class="Apple-converted-space">                </span>results.feedback.tilt = { correct: userTilt === correctTilt, user: userTilt ? tiltMap[userTilt] : 'None', answer: tiltMap[correctTilt] };</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!results.feedback.tilt.correct) results.isFullyCorrect = false;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const userActionPaths = formData.getAll('actionPath');</p>
<p class="p1"><span class="Apple-converted-space">                </span>results.feedback.actionPath = { correct: arrayEquals(userActionPaths.sort(), drug.actionPaths.sort()), user: userActionPaths.length &gt; 0 ? userActionPaths.join(', ') : 'None', answer: drug.actionPaths.join(', ') };</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!results.feedback.actionPath.correct) results.isFullyCorrect = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const userMechanisms = formData.getAll('indirectMechanism');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const requiresMechanisms = drug.actionPaths.includes('indirect');</p>
<p class="p1"><span class="Apple-converted-space">                </span>let mechanismsCorrect = false;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (requiresMechanisms) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>mechanismsCorrect = arrayEquals(userMechanisms.sort(), drug.indirectMechanisms.sort());</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>mechanismsCorrect = userMechanisms.length === 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>results.feedback.mechanisms = { correct: mechanismsCorrect, user: userMechanisms.length &gt; 0 ? userMechanisms.join(', ') : 'None', answer: drug.indirectMechanisms.length &gt; 0 ? drug.indirectMechanisms.join(', ') : 'None' };</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!results.feedback.mechanisms.correct) results.isFullyCorrect = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const userReceptors = formData.getAll('receptor');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const correctReceptors = state.mode === 'minimal' ? drug.receptors : Object.keys(drug.receptorMap);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const incorrectSelections = userReceptors.filter(r =&gt; !correctReceptors.includes(r));</p>
<p class="p1"><span class="Apple-converted-space">                </span>const missedSelections = correctReceptors.filter(r =&gt; !userReceptors.includes(r));</p>
<p class="p1"><span class="Apple-converted-space">                </span>let receptorsCorrect = incorrectSelections.length === 0 &amp;&amp; missedSelections.length === 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>results.feedback.receptors = { correct: receptorsCorrect, correctChips: userReceptors.filter(r =&gt; correctReceptors.includes(r)), incorrectChips: incorrectSelections, missedChips: missedSelections, advancedFeedback: {} };</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.mode === 'advanced') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let allAdvancedCorrect = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (correctReceptors.length &gt; 0) { // Only grade if there are receptors to grade</p>
<p class="p1"><span class="Apple-converted-space">                        </span>for (const receptor of correctReceptors) {</p>
<p class="p1"><span class="Apple-converted-space">                             </span>if (!userReceptors.includes(receptor)) {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>allAdvancedCorrect = false; continue;</p>
<p class="p1"><span class="Apple-converted-space">                             </span>}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const answer = drug.receptorMap[receptor];</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const detailsDiv = document.getElementById(`details-receptor-${receptor.replace('-','')}`);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const userMode = detailsDiv.querySelector('.toggle-switch .active').dataset.value;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>let modeCorrect = (answer.mode === 'both') || (userMode === answer.mode);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>if (!modeCorrect) allAdvancedCorrect = false;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>results.feedback.receptors.advancedFeedback[receptor] = { correct: modeCorrect, user: userMode, answer: answer.mode };</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else if (userReceptors.length &gt; 0) { // User selected receptors when none were correct</p>
<p class="p1"><span class="Apple-converted-space">                         </span>allAdvancedCorrect = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (!allAdvancedCorrect) receptorsCorrect = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>results.feedback.receptors.correct = receptorsCorrect;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!receptorsCorrect) results.isFullyCorrect = false;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>return results;</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const displayFeedback = (results) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>const createRow = (label, value, isCorrect) =&gt; `&lt;div class="feedback-row ${isCorrect ? 'correct' : 'incorrect'}"&gt;&lt;div class="label"&gt;${label}&lt;/div&gt;&lt;div class="value"&gt;${value}&lt;/div&gt;&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const createChip = (text, type) =&gt; `&lt;div class="chip ${type}"&gt;${text}&lt;/div&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.insertAdjacentHTML('beforeend', createRow('Pathway', results.feedback.pathway.user, results.feedback.pathway.correct));</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.insertAdjacentHTML('beforeend', createRow('Action Path', results.feedback.actionPath.user, results.feedback.actionPath.correct));</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.insertAdjacentHTML('beforeend', createRow('Agonism', results.feedback.agonism.user, results.feedback.agonism.correct));</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.insertAdjacentHTML('beforeend', createRow('Net Tilt', results.feedback.tilt.user, results.feedback.tilt.correct));</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.currentDrug.actionPaths.includes('indirect') || results.feedback.mechanisms.user !== 'None') {</p>
<p class="p1"><span class="Apple-converted-space">                     </span>DOMElements.feedbackSection.insertAdjacentHTML('beforeend', createRow('Mechanisms', results.feedback.mechanisms.user, results.feedback.mechanisms.correct));</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const receptorFb = results.feedback.receptors;</p>
<p class="p1"><span class="Apple-converted-space">                </span>let receptorChipsHTML = receptorFb.correctChips.map(r =&gt; createChip(r, 'correct')).join('');</p>
<p class="p1"><span class="Apple-converted-space">                </span>receptorChipsHTML += receptorFb.incorrectChips.map(r =&gt; createChip(r, 'incorrect')).join('');</p>
<p class="p1"><span class="Apple-converted-space">                </span>receptorChipsHTML += receptorFb.missedChips.map(r =&gt; createChip(r, 'missed')).join('');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const correctReceptorsString = (state.mode === 'minimal' ? state.currentDrug.receptors : Object.keys(state.currentDrug.receptorMap)).join(', ');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (receptorFb.missedChips.length &gt; 0 || receptorFb.incorrectChips.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                     </span>receptorChipsHTML += `&lt;div style="width: 100%; font-size: 0.8rem; margin-top: 0.5rem;"&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${ correctReceptorsString || 'None' }&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.feedbackSection.insertAdjacentHTML('beforeend', createRow('Receptors', `&lt;div class="feedback-chips"&gt;${receptorChipsHTML || 'None'}&lt;/div&gt;`, receptorFb.correct));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if(state.session === 'study' || !results.isFullyCorrect) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>DOMElements.explanation.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const showTestResults = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.testResultsContent.innerHTML = state.missedInTest</p>
<p class="p1"><span class="Apple-converted-space">                    </span>.map(item =&gt; `&lt;div&gt;&lt;strong&gt;${item.name}:&lt;/strong&gt; ${item.explanation}&lt;/div&gt;`)</p>
<p class="p1"><span class="Apple-converted-space">                    </span>.join('&lt;hr style="margin: 0.5rem 0; border-color: var(--border-color);"&gt;');</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.testResultsModal.classList.add('visible');</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- EVENT HANDLERS --- //</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.quizForm.addEventListener('submit', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.isFlipped) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const results = gradeAnswer();</p>
<p class="p1"><span class="Apple-converted-space">                </span>const answeredDrug = state.questionBank.shift(); // Remove drug from front of queue</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (results.isFullyCorrect) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>state.masteredBank.push(answeredDrug);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>state.questionBank.push(answeredDrug); // Add to back of queue if incorrect</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (state.session === 'test' &amp;&amp; !state.missedInTest.some(d =&gt; d.name === answeredDrug.name)) {</p>
<p class="p1"><span class="Apple-converted-space">                         </span>state.missedInTest.push({ name: answeredDrug.name, explanation: answeredDrug.explanation });</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>state.testCycleCount++;</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateScoreboard();</p>
<p class="p1"><span class="Apple-converted-space">                </span>displayFeedback(results);</p>
<p class="p1"><span class="Apple-converted-space">                </span>flipCard();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.session === 'test' &amp;&amp; state.testCycleCount &gt;= 10 &amp;&amp; state.missedInTest.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(showTestResults, 800);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.nextBtn.addEventListener('click', loadNewCard);</p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.backBtn.addEventListener('click', flipCard);</p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.resetBtn.addEventListener('click', () =&gt; DOMElements.quizForm.reset());</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.quizForm.querySelector('#action-indirect').addEventListener('change', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.indirectMechContainer.classList.toggle('hidden', !e.target.checked);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const setupToggle = (toggleEl, stateKey, callback) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>toggleEl.addEventListener('click', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (e.target.tagName === 'BUTTON') {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if(e.target.classList.contains('active')) return;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>toggleEl.querySelector('.active').classList.remove('active');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>e.target.classList.add('active');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>state[stateKey] = e.target.dataset[stateKey];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (callback) callback();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>setupToggle(DOMElements.modeToggle, 'mode', initializeQuiz);</p>
<p class="p1"><span class="Apple-converted-space">            </span>setupToggle(DOMElements.sessionToggle, 'session', initializeQuiz);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.chooseMinimalBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.mode = 'minimal';</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.modeToggle.querySelector('[data-mode="minimal"]').classList.add('active');</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.modeToggle.querySelector('[data-mode="advanced"]').classList.remove('active');</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.modeChooserModal.classList.remove('visible');</p>
<p class="p1"><span class="Apple-converted-space">                </span>initializeQuiz();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.chooseAdvancedBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.mode = 'advanced';</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.modeToggle.querySelector('[data-mode="advanced"]').classList.add('active');</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.modeToggle.querySelector('[data-mode="minimal"]').classList.remove('active');</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.modeChooserModal.classList.remove('visible');</p>
<p class="p1"><span class="Apple-converted-space">                </span>initializeQuiz();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>DOMElements.closeResultsBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>DOMElements.testResultsModal.classList.remove('visible');</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.testCycleCount = 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.missedInTest = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>window.addEventListener('keydown', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (DOMElements.modeChooserModal.classList.contains('visible') || DOMElements.testResultsModal.classList.contains('visible')) return;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (e.key === 'Enter' &amp;&amp; !state.isFlipped) DOMElements.submitBtn.click();</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (e.key.toLowerCase() === 'n' &amp;&amp; state.isFlipped) DOMElements.nextBtn.click();</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (e.key.toLowerCase() === 'r' &amp;&amp; !state.isFlipped) DOMElements.resetBtn.click();</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const clickElement = (selector) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const el = DOMElements.quizForm.querySelector(selector);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if(el) el.checked = !el.checked;</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!state.isFlipped) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>switch(e.key) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case '1': clickElement('#path-symp'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case '2': clickElement('#path-para'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case '3': clickElement('#path-gang'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case '5': clickElement('#agonism-agonist'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case '6': clickElement('#agonism-antagonist'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case 'f': clickElement('#tilt-fight'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case 'd': clickElement('#tilt-rest'); break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>case 'v': clickElement('#tilt-variable'); break;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- INITIALIZATION --- //</p>
<p class="p1"><span class="Apple-converted-space">            </span>const init = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>populateReceptors();</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Don't load card until mode is chosen</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>init();</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
